# AGENTS

## 📌 项目目标
- 使用 **Python 3.12 及以上版本** 开发和维护小型实验项目或工具。  
- 当前开发环境为 **Python 3.13**，但代码应尽量保持向后兼容。  
- 保持代码简洁、可读，便于快速迭代和后续维护。  
- 提供必要的测试，保证基本稳定性和正确性。  

---

## ⚙️ 开发与代码规范
1. 遵循 **PEP8** 编码规范。  
2. 命名规则：  
   - 变量/函数 → `snake_case`  
   - 类名 → `PascalCase`  
3. 所有函数必须添加 **类型注解** 和 **docstring（日文）**。  
4. 代码中的注释、日志、错误信息 **统一使用日文**。  
5. 调试信息必须使用 **logging** 模块，不得使用 `print()`。  
6. 修改 Python 源码后必须运行 python -m py_compile main.py，确保没有语法错误。

---

## 🧪 测试规则
1. 测试框架使用 **pytest**。  
2. 测试文件统一放在 `tests/` 目录下，命名为 `test_*.py`。  
3. 覆盖率目标：整体 **≥ 80%**，核心模块 **≥ 90%**。  
4. 测试代码中的注释和断言消息必须使用 **日文**。  
   - 例：`assert result == 42, "計算結果が期待値と一致しません"`  
5. 对公共函数编写最小单元测试，包括：  
   - 正常情况  
   - 异常输入  
   - 边界值  
6. 必要时使用 **mock** 替代外部依赖（如 I/O、API 调用）。  

---

## 📂 项目结构
```
project-root/
  src/            # 业务代码
  tests/          # 测试用例
  config/         # 配置文件
  docs/           # 文档（PRD、说明文档等）
  requirements.txt # 依赖管理
  README.md       # 项目说明
  AGENTS.md       # 开发与协作规则
  .env            # 本地密钥与配置（不提交到仓库）
  .env.example    # .env 文件示例
```

---

## 📌 提交规范
- 使用简洁的提交信息，推荐遵循 **Conventional Commit** 前缀：  
  - `feat:` 新功能  
  - `fix:` 缺陷修复  
  - `docs:` 文档修改  
  - `test:` 测试相关修改  
  - `refactor:` 重构代码  
- 提交前请确保 **pytest 测试通过**。  
- 因为是个人项目，不强制 Pull Request，但提交信息需清晰说明修改内容。  

---

## 🔒 安全与配置
1. 禁止在代码中硬编码敏感信息（如 API Key、密码）。  
2. 所有密钥和敏感配置存放在 **`.env` 文件**中，并在 **`.gitignore`** 中排除。  
3. 使用 `.env.example` 文件提供字段示例，便于他人部署。  
4. 保持配置与业务逻辑分离，避免影响版本管理。  

---

## 🗣 语言规则
1. 与 Codex 的交互一律使用 **中文**。  
2. 自动生成的文档（如 `AGENTS.md`、`README.md`）必须是 **中文**。  
3. 代码中的注释、日志与错误消息一律使用 **日文**。  

---
